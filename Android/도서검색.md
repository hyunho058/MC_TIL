# 도서검색

* Network 연결
  * UI Thread(Activity)에서 작업하면 안된다
  * Thread를 활용해 동작
  * Thread와 데이터를 주고받기 위해서 Handler를 이용

1. 접속할 URL

2. Java NetWork 기능은 외부 조건으로 의해 수행이 안될수 있음

   * try,catch이 용해 예외처리 해야함

3. URL Instance생성

4. URL 객체를 이용해 접속 

5. web Application의 호출방식 설정(GET,POST)

6. 접속 확인(ResponseCode)

   * HTTP protocol로 접속할 때 접속 결과 상태 값

7. AndroidMainfaest.xml

   * 네트워크 접속위한 보안 설정

   ```xml
   <manifest xmlns:android="http://schemas.android.com/apk/res/android"
       package="com.example.androidlectureexample">
       <uses-permission android:name="android.permission.INTERNET"/>
   ```

   * HTTPS protocol(Android pie버전(Android 9)으로 넘어오면서 HTTP에서 HTTPS로 바뀜)
     * web Protocol에 대한 기본 HTTP에서 HTTPS로 변경
     * web Server가 HTTPS를 사용하고 있으면 적용 안해줘도 되지만 HTTP를 이용하면 적용시켜줘야함
       * http://localhost:8080/bookSearch/searchTitle?keyword=java
       * https://local

   ```xml
   <application
           android:usesCleartextTraffic="true"
   ```

8. 서버와의 연결객체를 이용해서 데이터 통로 설정 (=Java Stream)

   * 기본적인 연렬 객체InputStreamReader(conn.getInputStream()) 를new BufferedReader() 객체에 담아서 편의성을 높여 사용

   ```java
   BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(conn.getInputStream()));
   ```

   * 서버가 보내주는 데이터를 읽어 하나의 문자열러 파싱

   ```java
   String readLine = "";
               StringBuffer responseText = new StringBuffer();
               while ((readLine=bufferedReader.readLine())!=null){
                   responseText.append(readLine);
               }
               bufferedReader.close();
   ```

9. webServer로 부터 가져온 데이터(문자열)를 자료구조화 시켜서 안드로이드에 적용

   * Json parsing library => Jackson library
   * build.gradle

   ```
   dependencies {
       implementation 'com.fasterxml.jackson.core:jackson-core:2.9.7'
       implementation 'com.fasterxml.jackson.core:jackson-annotations:2.9.7'
       implementation 'com.fasterxml.jackson.core:jackson-databind:2.9.7'
   ```

   ```java
   ObjectMapper mapper = new ObjectMapper();
               String[] resultArr = mapper.readValue(responseText.toString(),String[].class);
   ```

   

ㅠㅛ지이미지 제목 저자 가격 isbn(고유번호)



1. MySQL Server 접속

```
Microsoft Windows [Version 10.0.18362.239]
(c) 2019 Microsoft Corporation. All rights reserved.

C:\Users\student\Desktop\mysql-5.6.47-winx64\lib>cd C:\Users\student\Desktop\mysql-5.6.47-winx64\bin

C:\Users\student\Desktop\mysql-5.6.47-winx64\bin>mysqld
2020-03-23 10:22:13 0 [Warning] TIMESTAMP with implicit DEFAULT value is deprecated. Please use --explicit_defaults_for_timestamp server option (see documentation for more details).
2020-03-23 10:22:13 0 [Note] --secure-file-priv is set to NULL. Operations related to importing and exporting data are disabled
2020-03-23 10:22:13 0 [Note] mysqld (mysqld 5.6.47) starting as process 10892 ...
```

2. Eclipse Web Server 동작 확인

![image-20200323105521806](image/image-20200323105521806.png)

3. Android NetWork 접속 code 설정

